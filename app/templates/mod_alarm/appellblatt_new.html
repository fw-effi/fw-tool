{% extends "layout.html" %}
{% block CSS %}
    <!-- Smart Wizard CSS -->
    <link href="https://unpkg.com/smartwizard@5/dist/css/smart_wizard_all.min.css" rel="stylesheet" type="text/css"/>
{% endblock %}

{% block content %}
    <div class="block-header">
        <h2>Appellblätter</h2>
    </div>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="card">
                <div class="header">
                    <h2>NEUES APPELLBLATT ERSTELLEN</h2>
                    <small></small>
                </div>
                <div class="body">
                    <form class="form" id="form">
                        <div id="smartwizard">
                            <ul class="nav">
                                <li><a class="nav-link" href="#step-1">
                                    <strong>Basisdaten</strong><br/>
                                    Einsatzdetails eintragen
                                </a></li>
                                <li><a class="nav-link" href="#step-2">
                                    <strong>Personen</strong><br/>
                                    Anwesende Personen auswählen
                                </a></li>
                                <li><a class="nav-link" href="#step-3">
                                    <strong>Einsatzzeiten</strong><br/>
                                    Einsatzzeiten festlegen
                                </a></li>
                                <li><a class="nav-link" href="#step-4">
                                    <strong>Abschliessen</strong><br/>
                                    Appellblatt finalisieren
                                </a></li>
                            </ul>

                            <div class="tab-content">
                                <div id="step-1" class="tab-pane" role="tabpanel">
                                    <h3>Basisdaten</h3>
                                    <p>Bitte trage hier die Basis Daten vom Einsatz ein. Falls du einen aktiven Einsatz
                                        ausgewählt hast,
                                        werden die Daten automatisch ausgefüllt.</p>
                                    <div class="form-group">
                                        <label for="einsatz_nr">Einsatz Nr (von ELZ):</label>
                                        <input type="text" class="form-control" name="einsatz_nr" id="einsatz_nr"
                                               placeholder="Einsatz Nr">
                                        <span class="help-block">Einsatznummer aus Alarmausdruck (z.B. F21000400).</span>
                                    </div>

                                    <div class="form-group">
                                        <label for="einsatz_description">Einsatz Bezeichnung:</label>
                                        <input type="text" class="form-control" name="einsatz_description"
                                               id="einsatz_description"
                                               placeholder="Einsatz Bezeichnung">
                                        <span class="help-block">Verwende das Alarmstichwort (z.B. Brand MFH).</span>
                                    </div>
                                </div>
                                <div id="step-2" class="tab-pane" role="tabpanel">
                                    <h3>Personen</h3>
                                    <p>Wähle die anwesenden Personen aus. <br/>
                                        <strong>Nach jeder Änderung speichert das System automatisch.</strong></p>
                                    <div class="form-group">
                                        <label for="firefighter_search">Suche:</label>
                                        <input type="text" class="form-control" name="firefighter_search"
                                               id="firefighter_search">
                                    </div>

                                    <div class="list-group list_firefighter" id="list_firefighter">
                                        {% for firefighter in firefighters %}
                                            <a href="#" class="list-group-item list-group-item-action"
                                               data-meta="{{ firefighter.alarmgroups }}>"
                                               id="firefighter-{{ firefighter.id }}">
                                                {{ firefighter.grad }} {{ firefighter.vorname }} {{ firefighter.name }}
                                            </a>

                                        {% endfor %}
                                    </div>
                                </div>
                                <div id="step-3" class="tab-pane" role="tabpanel">
                                    <h3>Einsatzzeiten</h3>

                                    <p><a href="#" class="btn btn-primary" id="btnGeneralTimes" data-toggle="modal"
                                          data-target="#TimesModal">Allgemeine Einsatzzeiten festlegen</a></p>
                                    <div class="form-inline">
                                        <div class="form-group">
                                            <label for="txtTimeFrom">Allgemeine Einsatzzeiten</label>
                                            <p class="input-group">
                                                <input type="text" id="txtTimeFrom" readonly
                                                       class="form-control-plaintext form-control-sm" style="width:3em;">
                                            </p>
                                            <label for="txtTimeTo">bis</label>
                                            <p class="input-group">
                                                <input type="text" id="txtTimeTo" readonly
                                                       class="form-control-plaintext form-control-sm" style="width:3em;">
                                            </p>
                                        </div>
                                    </div>
                                    <p>Bei Personen ohne Einsatzzeiten in der Tabelle, werden automatisch die Allgemeinen Zeiten übernommen.</p>
                                    <table class="table table-bordered table-striped table-hover table-all dataTable" id="table-times" style="width:100%">
                                        <thead>
                                        <th>Name</th>
                                        <th>Einsatz von</th>
                                        <th>Einsatz bis</th>
                                        <th>Atemschutz</th>
                                        <th/>
                                        </thead>
                                        <tbody>
                                        </tbody>
                                    </table>
                                </div>
                                <div id="step-4" class="tab-pane" role="tabpanel">
                                    <h3>Abschliessen</h3>
                                    <p>Die Daten wurden erfolgreich gespeichert.<br />Zum Abschluss stehen folgende Optionen zur Verfügung:</p>
                                    <a href="#" class="btn btn-primary">An Lodur Einsatz anheften</a> <br/>
                                    <a href="#" class="btn btn-secondary">Zurück zur Startseite</a>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Row Modal START -->
    <div class="modal fade" id="EditRowModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="EditRowLabel">Einsatzzeiten bearbeiten </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                    <input type="hidden" id="rowId"/>
                    <div class="modal-body mx-3" id="EditRowBody">
                        <label for="person">Person:</label>
                        <div class="form-group">
                            <input type="text" id="person" readonly class="form-control-plaintext" placeholder="Person" disabled/>
                        </div>

                        <label for="einsatz_from">Einsatzzeiten:</label>
                        <div class="form-group">
                            <input type="time" id="einsatz_from" class="form-control" placeholder="Von" required/> -
                            <input type="time" id="einsatz_to" class="form-control" placeholder="Bis" required/>
                        </div>

                        <label for="atemschutz">Atemschutz:</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="atemschutz" placeholder="Atemschutz" required>
                            <div class="input-group-append">
                                <span class="input-group-text">Minuten</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" id="btnEditRowSave" class="btn btn-primary">SPEICHERN</button>
                        <button type="button" class="btn btn-light" data-dismiss="modal">ABBRECHEN</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Edit Row Modal Modal END -->

    <!-- General Times Modal START -->
    <div class="modal fade" id="TimesModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="TimesModalLabel">Allgemeine Einsatzzeiten festlegen </h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                    <div class="modal-body mx-3" id="TimesModalBody">

                        <label for="einsatz_from">Einsatzzeiten:</label>
                        <div class="form-group">
                            <input type="time" id="gen_einsatz_from" class="form-control" placeholder="Von" required/> -
                            <input type="time" id="gen_einsatz_to" class="form-control" placeholder="Bis" required/>
                        </div>

                    </div>
                    <div class="modal-footer">
                        <button type="submit" id="btnTimesModalSave" class="btn btn-primary">SPEICHERN</button>
                        <button type="button" class="btn btn-light" data-dismiss="modal">ABBRECHEN</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- General Times Modal END -->

{% endblock %}
{% block javascript %}

    <!-- Smart Wizard JS -->
    <script src="https://unpkg.com/smartwizard@5/dist/js/jquery.smartWizard.min.js" type="text/javascript"></script>
    <!-- Jquery Validate -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"
            integrity="sha512-UdIMMlVx0HEynClOIFSyOrPggomfhBKJE28LKl8yR3ghkgugPnG6iLfRfHwushZl1MOPSY6TsuBDGPK2X4zYKg=="
            crossorigin="anonymous"></script>
    <!-- Select Plugin Js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/bootstrap-select.min.js"
            integrity="sha512-yDlE7vpGDP7o2eftkCiPZ+yuUyEcaBwoJoIhdXv71KZWugFqEphIS3PU60lEkFaz8RxaVsMpSvQxMBaKVwA5xg=="
            crossorigin="anonymous"></script>

    <!-- Datatable -->
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js"></script>

    <!-- Page Javascripts -->
    <script type="text/javascript" src="/static/js/mod_alarm/appellliste_indexeddb.js"></script>
    <script type="text/javascript" src="/static/js/mod_alarm/appellliste.js"></script>

{% endblock %}